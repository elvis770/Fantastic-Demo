<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link 
        rel="stylesheet" 
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" 
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" 
        crossorigin="anonymous" 
        referrerpolicy="no-referrer" 
    />
    <link rel="stylesheet" href="music_styles.css">
    
    <title>Finntastic</title>
</head>
<body>
    
    <header>
        <div class="navbar">
            <div class="logo"> <a href="./index.html"> Finntastic </a></div>

            <ul class="links">
                <li><a href="./hero.html"><i class="fa-regular fa-user" style="color: #1a0a53;"></i></a></li>
                <li><a href="./mid.html"><i class="fa-solid fa-dumbbell" style="color: #1a0a53;"></i> </a></li>
                <li><a href="./music.html"><i class="fa-solid fa-music" style="color: #1a0a53;"></i></a></li>
            </ul>

            <a href="#" class="action_btn">Get Started</a>
            <div class="toggle_btn">
                <i  class="fa-solid fa-bars" style="color: #1a0a53;"></i>
            </div>
        </div>
        <div class="dropdown_menu">
            <li><a href="./hero.html"><i class="fa-regular fa-user" style="color: #1a0a53;"></i> User</a></li>
            <li><a href="music"><i class="fa-solid fa-phone" style="color: #1a0a53;"></i> Call</a></li>
            <li><a href="help"><i class="fa-solid fa-info" style="color: #1a0a53;"></i> Help</a></li>
            <li><a href="#" class="action_btn">click me</a></li>
        </div>
    </header>
    <main>
        <h1 class="topic">
            Browse All
        </h1>
        <div class="playlist">
            <div class="three">
                <a href="./daily.html">
                <h1>
                    Daily Report
                </h1>
                <img src="https://images.unsplash.com/flagged/photo-1574005280900-3ff489fa1f70?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="">
                </a>
            </div>
            <div class="two">
                <a href="./RnB.html">
                <h1>
                    RnB Mix
                </h1>
                <img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2slOO3zPOsbPZePqszGZ6A.jpeg" alt="">
                </a>
            </div>
            <div class="one">
                <a href="./hiphop.html">
                <h1>
                    Hiphop Mix
                </h1>
                <img src="https://miro.medium.com/v2/resize:fit:1400/0*EP44ZMASTf7J8400" alt="">
                </a>
            </div>
            
            <div class="four">
                <h1>
                    Live Events
                </h1>
                <img src="https://images.unsplash.com/photo-1574155376612-bfa4ed8aabfd?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="">
            </div>
            <div class="five">
                <a href="./chart.html">
                <h1>
                    Charts
                </h1>
                <img src="https://plus.unsplash.com/premium_photo-1677145595584-ec4e421794a2?q=80&w=2680&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="">
                </a>
            </div>
        </div>
        <div class="playlist_two">
            <div class="one_one">
                <h1>
                    House Mix
                </h1>
                <img src="https://plus.unsplash.com/premium_photo-1683134569393-69658335de74?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="">
            </div>
            <div class="two_one">
                <h1>
                    K-pop
                </h1>
                <img src="https://miro.medium.com/v2/resize:fit:4800/format:webp/1*8pC9cd8ALMzWCJydF9TAGA.jpeg" alt="">
            </div>
            <div class="three_one">
                <h1>
                    Latin Mix
                </h1>
                <img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PyGTA6tmiyfzzzHd" alt="">
            </div>
            <div class="four_one">
                <h1>
                    Chill Mix
                </h1>
                <img src="https://images.unsplash.com/photo-1529066516367-36973222c957?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="">
            </div>
            <div class="five_one">
                <a href="./mid.html">
                <h1>
                    Country
                </h1>
                <img src="https://images.unsplash.com/photo-1525201548942-d8732f6617a0?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="">
                </a>
            </div>
        </div>
    </main>
   
    <script>
        const toggleBtn = document.querySelector('.toggle_btn')
        const toggleBtnIcon = toggleBtn.querySelector('i') // Select the 'i' element within toggleBtn
        const dropDownMenu = document.querySelector('.dropdown_menu')

        toggleBtn.onclick = function() {
            dropDownMenu.classList.toggle('open')
            const isOpen = dropDownMenu.classList.contains('open')

            toggleBtnIcon.classList = isOpen
                ? 'fa-solid fa-xmark'
                : 'fa-solid fa-bars'
        }
    

        // intializer the variables 
        let songIndex = 0;
        let audioElement = new Audio('audio/1.mp3');
        // let masterPlay = document.getElementById('masterPlayBtn');
        let myProgressBar = document.getElementById('myProgressBar');
        let gif = document.getElementById('gif');
        let masterSongName = document.getElementById('masterSongName');
        let songItems = Array.from(document.getElementsByClassName('songItem'));
        


        let songs =[
            {songName: "Day 1 - Update", filePath: "audio/1.mp3", coverPath:"Almost_black_square_020305.png"},
            {songName: "Beso (ROSALI'A ft Rauw Alejandro)", filePath: "audio/2.mp3", coverPath:"images /beso.jpeg"},
            {songName: "Close Friends (Lil baby)", filePath: "audio/3.mp3", coverPath:"images /close friends.jpeg"},
            {songName: "First Person Shooter (Drake ft J.Cole)", filePath: "audio/4.mp3", coverPath:"images /Drake_-_For_All_The_Dogs.png"},
            {songName: "Praise The Lord (A$ap Rocky ft Skepta)", filePath: "audio/5.mp3", coverPath:"images /ASAP_Rocky_Testing.jpg"},
            {songName: "Pure Soul (YE ft Roddy rich)", filePath: "audio/6.mp3", coverPath:"Almost_black_square_020305.png"}
        ]
        songItems.forEach((element, i)=>{
            element.getElementsByTagName("img")[0].src = songs[i].coverPath;
            element.getElementsByClassName("songName")[0].innerText = songs[i].songName;

        })
        // audioElement.play()
        // Handle play/pause click
        
        const masterPlay = document.getElementById('masterPlay')

        masterPlay.addEventListener('click',()=>{
            if(audioElement.paused || audioElement.currentTime<=0){
                audioElement.play();
                masterPlay.classList.remove('fa-circle-play');
                masterPlay.classList.add('fa-circle-pause');
                gif.style.opacity = 1;
            }
            else{
                audioElement.pause();
                masterPlay.classList.remove('fa-circle-pause');
                masterPlay.classList.add('fa-circle-play');
                gif.style.opacity = 0;
            }
        })
       
        //Listen to events 
        audioElement.addEventListener('timeupdate', ()=>{
            console.log('timeupdate')
            // update seekbar
            progess = parseInt((audioElement.currentTime/audioElement.duration)* 100);
            myProgressBar.value = progess;
        })
        myProgressBar.addEventListener('change', ()=>{
            audioElement.currentTime = myProgressBar.value * audioElement.duration/100;
        })
        const makeAllPlays = ()=>{
            Array.from(document.getElementsByClassName('songItemPlay')).forEach((element)=>{
                element.classList.remove('fa-circle-pause');
                element.classList.add('fa-circle-play');
            })
        }
        Array.from(document.getElementsByClassName('songItemPlay')).forEach((element)=>{
            element.addEventListener('click', (e)=>{
                makeAllPlays();
                songIndex = parseInt(e.target.id);
                e.target.classList.remove('fa-circle-play');
                e.target.classList.add('fa-circle-pause');
                audioElement.src = `audio/${songIndex+1}.mp3`;
                masterSongName.innerText = songs[songIndex].songName;
                audioElement.currentTime = 0;
                audioElement.play();
                gif.style.opacity = 1;
                masterPlay.classList.remove('fa-circle-play');
                masterPlay.classList.add('fa-circle-pause');
            })
        })
        document.getElementById('next').addEventListener('click', ()=>{
            if(songIndex>=9){
                songIndex = 0
            }
            else{
                songIndex += 1;
            }
            audioElement.src = `audio/${songIndex+1}.mp3`;
            masterSongName.innerText = songs[songIndex].songName;
            audioElement.currentTime = 0;
            audioElement.play();
            masterPlay.classList.remove('fa-circle-play');
            masterPlay.classList.add('fa-circle-pause');
        })
        document.getElementById('previous').addEventListener('click', ()=>{
            if(songIndex<= 0){
                songIndex = 0
            }
            else{
                songIndex -= 1;
            }
            audioElement.src = `audio/${songIndex+1}.mp3`;
            masterSongName.innerText = songs[songIndex].songName;
            audioElement.currentTime = 0;
            audioElement.play();
            masterPlay.classList.remove('fa-circle-play');
            masterPlay.classList.add('fa-circle-pause');
        })
    </script>
   
    <footer>
        <div class="footbar">
            <li><a href="./index.html"> <i id="1" class="fa-solid fa-house" style="color: #1a0a53;"></i></a></li>
            <li><a href="./mid.html"> <i id="1" class="fa-solid fa-dumbbell" style="color: #1a0a53;"></i> </a></li>
            <li><i class="fa-solid fa-music" style="color: #1a0a53;"></i></li>  
        </div>
    </footer>
</body>
</html>